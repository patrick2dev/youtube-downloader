doctype html
head
  meta(charset='UTF-8')
  meta(name='viewport' content='width=device-width, initial-scale=1.0')
  title youtube video downloader
  link(rel='stylesheet' href="{{ url_for('static', filename='style.css') }}")
.middle
  form(action='' onsubmit='return false')
    label video:
    input#url(type='text' name='url')
    button(onclick='youtubeSend()') get video details
  .loader
    | loading...
  ul#details
    .body
      img#thumbnail(src='' alt='')
      div
        li#title
        li#views
        li#author
        li#download
script(src='https://code.jquery.com/jquery-3.5.1.min.js')
script.
  function youtubeSend() {
    if ($('#url').val() != "") {
      $('.loader').show();
      $('form >button').addClass('disabled');
      $('#download').html(``);
      $('#details').hide();
      $('#thumbnail').attr('src', '');
      $.get('http://127.0.0.1:5000/api/youtube', { url: $('#url').val() }, (result) => {
        $('.loader').hide();
        $('form >button').removeClass('disabled');
        $('#details').show()
        $('#title').html(`<span class="text-head">TITLE:</span><span class="text">${result.details.title}</span>`);
        $('#views').html(`<span class="text-head">VIEWS:</span><span class="text">${result.details.views} views</span>`);
        $('#author').html(`<span class="text-head">AUTHOR:</span><span class="text">${result.details.author}</span>`);
        $('#thumbnail').attr('src', result.details.thumbnail);
        $.each(result.sources, (id, src) => {
          $('#download').append('<a style="text-decoration:none;color:#fff;" href="'+src.download+'?title='+result.details.title+'"><button>download '+src.resolution+'</button></a>')
        });
      }, "json");
    } else {
      return false;
    }
  }
